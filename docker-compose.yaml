networks:
  default:
    driver: bridge
    driver_opts:
      com.docker.network.driver.mtu: 1450

services:
  database:
    image: mongo:5
    hotsname: databaseTest
    volumes:
      - db-floor:/data/db
      - ./restore-folder:/data/restore
    ports:
      - 27017:27017
    command: mongod --replSet rs0 --bind_ip_all
    healthcheck:
      test: ["CMD", "mongo", "--eval", "db.runCommand('ping').ok"]
      interval: 10s
      timeout: 5s
      retries: 5
    networks:
      - default

  # redis:
  #   image: redis:7
  #   volumes:
  #     - redis-data:/data
  #   ports:
  #     - 6379:6379
  #   command: redis-server --requirepass redis_password
  #   networks:
  #     - default

volumes:
  db-floor:
  redis-data: